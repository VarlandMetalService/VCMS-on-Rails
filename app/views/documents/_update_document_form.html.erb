<div class="well">
  <%= form_for @document do |f| %>

    <% if @document.errors.any? %>
      <div class="error_explanation bg-danger text-danger">
        <p><%= pluralize(@document.errors.count, "error") %> prevented this document from being saved:</p>
        <ul>
          <% @document.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="row">

      <div class="col-xs-12">

        <div class="form-group<%= ' has-error' if @document.errors[:name].any? %>">
          <%= f.label :name, 'Name:', class: 'control-label' %>
          <%= f.text_field :name, { class: 'form-control' } %>
        </div>

        <div class="form-group<%= ' has-error' if @document.errors[:document_updated_at].any? %>">
          <%= f.label :document_updated_at, 'Date:', class: 'control-label' %>
          <%= f.datetime_local_field :document_updated_at, { class: 'form-control' } %>
        </div>

        <div class="form-group<%= ' has-error' if @document.errors[:file].any? %>">
          <%= f.label :file, 'File:', class: 'control-label' %>
          <%= f.file_field :file, { class: 'form-control' } %>
        </div>

        <div class="form-group<%= ' has-error' if @document.errors[:categories].any? %>">
          <%= f.label :category_ids, required_field_label('Folder(s):'), class: 'control-label' %>
          <%= f.select :category_ids, nested_set_options(Category, @document) {|i| "#{'&ndash;' * i.level} #{i.name}".html_safe }, { include_blank: false }, { class: 'form-control', multiple: true, size: Category.count, required: 'required' } %>
        </div>

      </div>

    </div>

    <div class="row">

      <div class="col-xs-12">

        <%= f.submit 'Update Document', { class: 'btn btn-primary' } %>
        <%= link_to 'Cancel', @document, class: 'btn btn-link' %>

      </div>

    </div>

  <% end %>
</div>